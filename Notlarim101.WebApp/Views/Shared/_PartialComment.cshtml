@using Notlarim101.Entity
@using Notlarim101.WebApp.Models
@model List<Notlarim101.Entity.Comment>

@{ 
    NotlarimUser user = CurrentSession.User;
}

@foreach (Comment item in Model)
{
    
    <div class="d-flex row">
        <div class="flex-shrink-0">
            <span class="bi bi-chat-left-dots-fill text-danger mt-2"></span>
        </div>
        <div class="flex-grow-1 ms-3 ">
            <span class="com-md-9" id="comment_text_@item.Id" contenteditable="false">@item.Text</span>
            @if (user!=null && user.Id==item.Owner.Id)
            {
                <span class=" col-md-3">
                    <button type="button" class="btn btn-warning btn-sm" data-edit-mode="false" onclick="doComment(this,'edit_clicked',@item.Id,'#comment_text_@item.Id')">
                        <span class="bi bi-pencil"></span>
                    </button> 
                    <button type="button" class="btn btn-danger btn-sm" onclick="doComment(this, 'delete_clicked',@item.Id)">
                        <i class="bi bi-trash"></i>
                    </button>
                </span>
            }
        <small class="col-md-12">
            <span class="bi bi-clock"></span> @item.ModifiedOn &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <span class="bi bi-person"></span> @item.Owner.Username
        </small>
        </div>
    </div>
}
@if (user!=null)
{
    <div class="row">
        <div class="col-md-12">
            <hr />
        </div>
    </div>
    <div class="row">
            <div class="input-group mb-3">
                <input type="text" id="new_comment_text" class="form-control" placeholder="Yorumunuz">
                <span class="input-group-text" id="basic-addon2">
                    <button type="button" class="btn btn-success" onclick="doComment(this,'new_clicked',-1)">
                        <span class="bi bi-paper-plane"></span> Gönder
                    </button>
                </span>
            </div>
    </div>
}